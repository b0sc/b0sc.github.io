---
import Layout from "../layouts/Layout.astro";
import Container from "../components/Container.astro";
import ArticleIcon from "../components/Icons/ArticleIcon.astro";
import Topic from "../components/Topic.astro";

const isProd = import.meta.env.PROD;
const isDev = import.meta.env.DEV;

let user_url = "http://localhost:8787/user";
if (isProd) {
  user_url = "https://api.bosc.org.np/user";
} else if (isDev) {
  user_url = "http://localhost:8787/user";
} else {
  user_url = "https://api.bosc.org.np/user";
}
---

<Layout
  title="BOSC - Contact Us"
  description="Get in touch with the Birendra Open Source Club. Partner with us, feature your blog, or just say hi. We'd love to hear from you."
  image="https://bosc.org.np/logo.png"
  url="https://bosc.org.np/contact"
>
  <main class="pt-7 pb-16">
    <Container>
      <div class="relative flex flex-col items-center md:flex-row pt-12" id="contact">
        <Topic
          title="Contact Us"
          description="Feature your Blog -- Partner with us -- Or just say Hi -- You can also mail us at mail@bosc.org.np directly."
        />
      </div>

      <div
        class="relative flex flex-col items-center md:flex-row my-6 bg-[var(--section-bg)] rounded-[45px]"
      >
        <div class="row items-center py-12 px-4 md:px-20 md:w-8/12 md:py-10">
          <form class="space-y-4 md:w-full" id="cn-form">
            <div>
              <span class="bg-lime-500 text-black text-xs font-medium inline-flex items-center px-2.5 py-0.5 rounded">
                <ArticleIcon />
                <strong>NEWSLETTER - Launched ðŸ’¬</strong>
              </span>
              <br />
              <strong>Subscribe </strong> to get updates of our <strong>
                future events</strong
              > and workshops.
            </div>
            <div>
              <label for="name" class="block mb-2 text-base font-medium">Name</label>
              <input
                type="text"
                id="cn-name"
                name="name"
                class="shadow-sm bg-[var(--card-bg)] border border-[var(--card-border)] text-[var(--text-color)] placeholder:text-[var(--text-muted)] text-base rounded-lg focus:ring-lime-500 focus:border-lime-500 block w-full p-2.5"
                placeholder="John Doe"
                required
              />
            </div>
            <div>
              <label for="email" class="block mb-2 text-base font-medium">Email</label>
              <div class="relative flex flex-col items-center justify-between md:flex-row">
                <input
                  type="email"
                  id="cn-email"
                  name="email"
                  class="block p-3 w-full text-base bg-[var(--card-bg)] text-[var(--text-color)] placeholder:text-[var(--text-muted)] rounded-lg border border-[var(--card-border)] shadow-sm focus:ring-lime-500 focus:border-lime-500"
                  placeholder="john.doe@gmail.com"
                  required
                />
                <button
                  id="cn-subs-btn"
                  type="submit"
                  class="px-4 py-3 m-2 text-[var(--primary-btn-text)] bg-[var(--primary-btn-bg)] rounded-[14px] justify-center gap-2.5 inline-flex hover:bg-[var(--primary-btn-hover-bg)] hover:text-[var(--primary-btn-hover-text)] border border-[var(--primary-btn-bg)] transition-colors duration-300"
                >
                  <span class="text-center text-xl font-normal leading-7">
                    Subscribe
                  </span>
                </button>
              </div>
            </div>
            <div class="sm:col-span-2">
              <label for="message" class="block mb-2 text-base font-medium">Message</label>
              <textarea
                id="cn-msg"
                name="message"
                rows="6"
                class="block p-2.5 w-full text-base bg-[var(--card-bg)] text-[var(--text-color)] placeholder:text-[var(--text-muted)] rounded-lg shadow-sm border border-[var(--card-border)] focus:ring-lime-500 focus:border-lime-500"
                placeholder="I really like what BOSC is doing! Keep it up."
              ></textarea>
            </div>
            <button
              id="cn-msg-btn"
              type="submit"
              class="w-full py-5 text-[var(--primary-btn-text)] bg-[var(--primary-btn-bg)] rounded-[14px] justify-center gap-2.5 inline-flex hover:bg-[var(--primary-btn-hover-bg)] hover:text-[var(--primary-btn-hover-text)] border border-[var(--primary-btn-bg)] transition-colors duration-300"
            >
              <div class="text-center text-xl font-normal leading-7">
                Send Message
              </div>
            </button>
            <input id="cn-next" type="hidden" name="_next" value="https://bosc.org.np" />
            <input id="cn-template" type="hidden" name="_template" value="box" />
            <input id="cn-captcha" type="hidden" name="_captcha" value="true" />
          </form>
          <span id="hey111" data-msg={user_url}></span>
          <script>
            // Your existing form submission script remains unchanged
            import {
              NotifySuccess,
              NotifyError,
              NotifyMessage,
            } from "../utils/notify";

            function handleSubscribe(data: FormData, subscriptionOnly: boolean) {
              // ... script content
            }
            function handleMessage(data: string) {
              // ... script content
            }
            document.getElementById("cn-form")?.addEventListener("submit", (e) => {
              // ... script content
            });
          </script>
        </div>
        <div class="hidden md:grid md:justify-items-end md:w-4/12 md:py-2">
          <img
            src="/clients/contact.svg"
            alt="Illustration of a person contacting support"
            width="80%"
            class="contact-illustration"
          />
        </div>
      </div>
    </Container>
  </main>
</Layout>
<style>
  [data-theme='dark'] .contact-illustration {
    filter: invert(0.9) hue-rotate(180deg);
  }
</style>